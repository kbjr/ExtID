h1. ExtID

Author: James Brumond
Version 0.3.1-dev

Copyright 2011 James Brumond
Dual licensed under MIT and GPL

h2. Description

An easy to use external authentication library for CodeIgniter applications. This library handles both OpenID and OAuth requests to provide a simple interface to remote authentication.

Those interested in following the production of this library can do so on twitter ("@CI_ExtID":http://twitter.com/CI_ExtID)
All inquiries, questions, comments, etc. can be passed alone either here on GitHub or to the email address "ci.extid@gmail.com":ci.extid@gmail.com

h2. Requires

* PHP 5+
* CodeIgniter

h2. Installation

All of the files are stored in this repository in their respective locations. Just merge this file structure into your CodeIgniter application.

h2. Basic Usage

After installing the files into your application, you can use the library like so:

<pre><code><?php

class Auth extends Controller {

	function Auth()
	{
		parent::Controller();
		$this->load->library('ExtID');
	}
	
	/**
	 * Starts the authentication proccess
	 *
	 * This is just a normal page. It will have your login options
	 * as links for the user to select from.
	 */
	function index()
	{
		// Build the needed markup using the default config
		$data['login_code'] = $this->extid->generate_login('default');
		
		// Load your page
		$this->load->view('auth_test', $data);
	}
	
	/**
	 * Handles the actual logging in
	 *
	 * This is where the login link in the /auth/index route direct
	 * your user. The name of this route is set in the config.
	 */
	function login()
	{
		try
		{
			$this->extid->authenticate();
		}
		catch (Exception $e)
		{
			$data['error'] = $e->getMessage();
			$this->load->view('auth_test', $data);
		}
	}
	
	/**
	 * Completes the authentication proccess
	 *
	 * This function collects the data sent back from the provider.
	 */
	function callback()
	{
		try
		{
			$data['result'] = $this->extid->finish_auth();
		}
		catch (Exception $e)
		{
			$data['error'] = $e->getMessage();
		}
		
		//
		// $data['result'] now contains the user's info sent back from the provider. Any
		// values not provided will be NULL. If the provider is Facebook or Twitter, there
		// is an extra value, 'id', which refers to the user's ID number.
		//
		// $data = array(
		//   'fullname' => string, the user's name
		//   'nickname' => string, the user's username/nickname
		//   'email'    => string, the user's email address (never provided by Twitter)
		//   'id'       => string, only if provider is Facebook/Twitter
		// )
		//
		
		$this->load->view('auth_test', $data);
	}
	
	/**
	 * Loads resource files
	 */
	function resource()
	{
		$this->extid->load_resource();
	}

}

/* End of file auth.php */
/* Location ./application/controllers/auth.php */</code></pre>




